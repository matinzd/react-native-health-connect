"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[446],{212:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>a,default:()=>c,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"permissions","title":"Permissions","description":"Setting up permissions in React Native CLI template","source":"@site/docs/permissions.md","sourceDirName":".","slug":"/permissions","permalink":"/react-native-health-connect/docs/permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/matinzd/react-native-health-connect/tree/main/docs/docs/permissions.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Permissions"},"sidebar":"tutorialSidebar","previous":{"title":"Get started","permalink":"/react-native-health-connect/docs/get-started"},"next":{"title":"API Reference","permalink":"/react-native-health-connect/docs/category/api-reference"}}');var r=n(4848),d=n(8453);const t={sidebar_position:3,title:"Permissions"},a="Permissions",o={},l=[{value:"Setting up permissions in React Native CLI template",id:"setting-up-permissions-in-react-native-cli-template",level:2},{value:"Setting up permissions in Expo",id:"setting-up-permissions-in-expo",level:2},{value:"Complete list of permissions",id:"complete-list-of-permissions",level:2},{value:"Special Permissions",id:"special-permissions",level:2},{value:"Background Access Permission",id:"background-access-permission",level:3},{value:"Exercise Route Permission",id:"exercise-route-permission",level:3}];function h(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"permissions",children:"Permissions"})}),"\n",(0,r.jsx)(i.h2,{id:"setting-up-permissions-in-react-native-cli-template",children:"Setting up permissions in React Native CLI template"}),"\n",(0,r.jsx)(i.p,{children:"To access health data from the Health Connect app in your own app, you need to add the necessary permissions and filters to the app manifest."}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Add the necessary permissions to ",(0,r.jsx)(i.code,{children:"AndroidManifest.xml"}),":"]}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-diff",metastring:'title="android/src/main/AndroidManifest.xml"',children:'<manifest xmlns:android="http://schemas.android.com/apk/res/android">\n    <uses-permission android:name="android.permission.INTERNET" />\n+   <uses-permission android:name="android.permission.health.READ_HEART_RATE"/>\n+   <uses-permission android:name="android.permission.health.WRITE_HEART_RATE"/>\n+   <uses-permission android:name="android.permission.health.READ_STEPS"/>\n+   <uses-permission android:name="android.permission.health.WRITE_STEPS"/>\n</manifest>\n'})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Create ",(0,r.jsx)(i.code,{children:"PermissionRationaleActivity.kt"})]}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-diff",metastring:'title="android/app/src/main/java/com/healthconnectexample/PermissionRationaleActivity.kt"',children:'package com.healthconnectexample\n\nimport android.os.Bundle\nimport android.webkit.WebResourceRequest\nimport android.webkit.WebView\nimport android.webkit.WebViewClient\nimport androidx.appcompat.app.AppCompatActivity\n\nclass PermissionsRationaleActivity: AppCompatActivity() {\n  override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n    val webView = WebView(this)\n    webView.webViewClient = object : WebViewClient() {\n      override fun shouldOverrideUrlLoading(view: WebView?, request: WebResourceRequest?): Boolean {\n        return false\n      }\n    }\n\n    webView.loadUrl("https://developer.android.com/health-and-fitness/guides/health-connect/develop/get-started")\n\n    setContentView(webView)\n  }\n}\n'})}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Add the following highlighted code inside the application tag as well:"}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-diff",metastring:'title="android/src/main/AndroidManifest.xml"',children:'    <activity\n      android:name=".MainActivity"\n      android:label="@string/app_name"\n      android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|screenSize|smallestScreenSize|uiMode"\n      android:launchMode="singleTask"\n      android:windowSoftInputMode="adjustResize"\n      android:exported="true">\n      <intent-filter>\n          <action android:name="android.intent.action.MAIN" />\n          <category android:name="android.intent.category.LAUNCHER" />\n      </intent-filter>\n+      \x3c!-- For supported versions through Android 13, create an activity to show the rationale\n+           of Health Connect permissions once users click the privacy policy link. --\x3e\n+      <intent-filter>\n+        <action android:name="androidx.health.ACTION_SHOW_PERMISSIONS_RATIONALE" />\n+      </intent-filter>\n    </activity>\n\n+    <activity\n+      android:name=".PermissionsRationaleActivity"\n+      android:exported="true">\n+      <intent-filter>\n+        <action android:name="androidx.health.ACTION_SHOW_PERMISSIONS_RATIONALE" />\n+      </intent-filter>\n+    </activity>\n+\n+    \x3c!-- For versions starting Android 14, create an activity alias to show the rationale\n+         of Health Connect permissions once users click the privacy policy link. --\x3e\n+    <activity-alias\n+      android:name="ViewPermissionUsageActivity"\n+      android:exported="true"\n+      android:targetActivity=".MainActivity"\n+      android:permission="android.permission.START_VIEW_PERMISSION_USAGE">\n+      <intent-filter>\n+        <action android:name="android.intent.action.VIEW_PERMISSION_USAGE" />\n+        <category android:name="android.intent.category.HEALTH_PERMISSIONS" />\n+      </intent-filter>\n+    </activity-alias>\n'})}),"\n",(0,r.jsx)(i.h2,{id:"setting-up-permissions-in-expo",children:"Setting up permissions in Expo"}),"\n",(0,r.jsxs)(i.p,{children:["You will need to use ",(0,r.jsx)(i.a,{href:"https://docs.expo.dev/eas/",children:"EAS Build"})," and ",(0,r.jsx)(i.a,{href:"https://docs.expo.dev/config-plugins/introduction/",children:"Config plugins"})," in your project."]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Edit ",(0,r.jsx)(i.code,{children:"app.json"})," and add the permissions you need."]}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-json",children:'{\n  "expo": {\n    ...\n    "android": {\n      ...\n      "permissions": [\n        "android.permission.health.READ_STEPS",\n        "android.permission.health.WRITE_STEPS",\n        "android.permission.health.READ_ACTIVE_CALORIES_BURNED"\n      ]\n    },\n   ...\n  }\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"complete-list-of-permissions",children:"Complete list of permissions"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Record class type"}),(0,r.jsx)(i.th,{children:"Read permission declaration"}),(0,r.jsx)(i.th,{children:"Write permission declaration"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"ActiveCaloriesBurned"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_ACTIVE_CALORIES_BURNED"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_ACTIVE_CALORIES_BURNED"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"BasalBodyTemperature"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_BASAL_BODY_TEMPERATURE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_BASAL_BODY_TEMPERATURE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"BasalMetabolicRate"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_BASAL_METABOLIC_RATE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_BASAL_METABOLIC_RATE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"BloodGlucose"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_BLOOD_GLUCOSE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_BLOOD_GLUCOSE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"BloodPressure"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_BLOOD_PRESSURE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_BLOOD_PRESSURE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"BodyFat"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_BODY_FAT"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_BODY_FAT"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"BodyTemperature"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_BODY_TEMPERATURE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_BODY_TEMPERATURE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"BoneMass"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_BONE_MASS"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_BONE_MASS"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"CervicalMucus"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_CERVICAL_MUCUS"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_CERVICAL_MUCUS"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"CyclingPedalingCadence"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_EXERCISE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_EXERCISE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Distance"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_DISTANCE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_DISTANCE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"ElevationGained"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_ELEVATION_GAINED"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_ELEVATION_GAINED"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"ExerciseSession"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_EXERCISE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_EXERCISE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"FloorsClimbed"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_FLOORS_CLIMBED"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_FLOORS_CLIMBED"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"HeartRate"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_HEART_RATE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_HEART_RATE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Height"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_HEIGHT"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_HEIGHT"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Hydration"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_HYDRATION"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_HYDRATION"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"LeanBodyMass"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_LEAN_BODY_MASS"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_LEAN_BODY_MASS"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"MenstruationFlow"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_MENSTRUATION"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_MENSTRUATION"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"MenstruationPeriod"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_MENSTRUATION"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_MENSTRUATION"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Nutrition"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_NUTRITION"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_NUTRITION"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"OvulationTest"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_OVULATION_TEST"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_OVULATION_TEST"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"OxygenSaturation"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_OXYGEN_SATURATION"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_OXYGEN_SATURATION"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Power"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_POWER"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_POWER"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"RespiratoryRate"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_RESPIRATORY_RATE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_RESPIRATORY_RATE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"RestingHeartRate"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_RESTING_HEART_RATE"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_RESTING_HEART_RATE"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"SexualActivity"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_SEXUAL_ACTIVITY"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_SEXUAL_ACTIVITY"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"SleepSession"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_SLEEP"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_SLEEP"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Speed"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_SPEED"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_SPEED"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"StepsCadence"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_STEPS"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_STEPS"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Steps"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_STEPS"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_STEPS"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"TotalCaloriesBurned"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_TOTAL_CALORIES_BURNED"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_TOTAL_CALORIES_BURNED"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Vo2Max"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_VO2_MAX"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_VO2_MAX"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Weight"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_WEIGHT"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_WEIGHT"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"WheelchairPushes"}),(0,r.jsx)(i.td,{children:"android.permission.health.READ_WHEELCHAIR_PUSHES"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_WHEELCHAIR_PUSHES"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"WriteExerciseRoute"}),(0,r.jsx)(i.td,{children:"android.permission.health.WRITE_EXERCISE_ROUTE"}),(0,r.jsx)(i.td,{children:"N/A"})]})]})]}),"\n",(0,r.jsxs)(i.p,{children:["You can read more about data types and permissions ",(0,r.jsx)(i.a,{href:"https://developer.android.com/guide/health-and-fitness/health-connect/data-and-data-types/data-types",children:"here"}),"."]}),"\n",(0,r.jsx)(i.h2,{id:"special-permissions",children:"Special Permissions"}),"\n",(0,r.jsx)(i.p,{children:"In addition to the standard record type permissions, Health Connect provides special permissions for specific functionality:"}),"\n",(0,r.jsx)(i.h3,{id:"background-access-permission",children:"Background Access Permission"}),"\n",(0,r.jsx)(i.p,{children:"This permission allows your app to read health data in the background, even when your app is not in the foreground."}),"\n",(0,r.jsxs)(i.p,{children:["First, add the background access permission to your ",(0,r.jsx)(i.code,{children:"AndroidManifest.xml"}),":"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-xml",children:'<uses-permission android:name="android.permission.health.READ_HEALTH_DATA_IN_BACKGROUND"/>\n'})}),"\n",(0,r.jsx)(i.p,{children:"Then, request the permission in your app:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"// Request background access permission\nrequestPermission([\n  {\n    accessType: 'read',\n    recordType: 'BackgroundAccessPermission',\n  },\n  // Other permissions...\n]);\n"})}),"\n",(0,r.jsxs)(i.p,{children:["Under the hood, this maps to ",(0,r.jsx)(i.code,{children:"HealthPermission.PERMISSION_READ_HEALTH_DATA_IN_BACKGROUND"})," in the Android Health Connect API."]}),"\n",(0,r.jsxs)(i.p,{children:["See the ",(0,r.jsx)(i.a,{href:"/react-native-health-connect/docs/api/methods/backgroundAccessPermission",children:"Background Access Permission"})," documentation for more details."]}),"\n",(0,r.jsx)(i.h3,{id:"exercise-route-permission",children:"Exercise Route Permission"}),"\n",(0,r.jsx)(i.p,{children:"This special permission is required to write exercise routes:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-ts",children:"requestPermission([\n  {\n    accessType: 'write',\n    recordType: 'ExerciseRoute',\n  },\n  // Other permissions...\n]);\n"})})]})}function c(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>a});var s=n(6540);const r={},d=s.createContext(r);function t(e){const i=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(d.Provider,{value:i},e.children)}}}]);